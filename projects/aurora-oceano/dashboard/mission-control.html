<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Control - Aurora Oceano</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #0c1929 0%, #1a365d 100%); min-height: 100vh; }
        .glass { background: rgba(255,255,255,0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); }
        .glass-light { background: rgba(255,255,255,0.06); }
        .gradient-blue { background: linear-gradient(135deg, #0ea5e9 0%, #2563eb 100%); }
        .gradient-green { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .gradient-orange { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); }
        .gradient-red { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .gradient-purple { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 15px 40px rgba(0,0,0,0.3); }
        .pulse-dot { animation: pulse 2s infinite; }
        .pulse-urgent { animation: pulse-urgent 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.7; transform: scale(1.1); } }
        @keyframes pulse-urgent { 0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); } 50% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); } }
        .badge { font-size: 0.65rem; padding: 2px 8px; border-radius: 4px; font-weight: 600; text-transform: uppercase; }
        .notification-enter { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .btn-approve { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .btn-approve:hover { background: linear-gradient(135deg, #059669 0%, #047857 100%); }
        .btn-reject { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .btn-reject:hover { background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); }
        .btn-counter { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); }
        .btn-counter:hover { background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%); }
        .tab-active { background: rgba(255,255,255,0.1); border-bottom: 2px solid #0ea5e9; }
        .modal-overlay { background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); }
        input[type="number"], input[type="text"], select { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); }
        input[type="number"]:focus, input[type="text"]:focus, select:focus { outline: none; border-color: #0ea5e9; }
    </style>
</head>
<body class="text-white p-4 lg:p-6">
    <!-- Header -->
    <header class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6">
        <div class="flex items-center gap-4">
            <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center text-2xl">üéõÔ∏è</div>
            <div>
                <h1 class="text-2xl lg:text-3xl font-bold">Mission Control</h1>
                <p class="text-slate-400 text-sm">Centro de Aprova√ß√µes & Alertas - Auroroceano</p>
            </div>
        </div>
        <div class="flex flex-wrap items-center gap-3">
            <div class="glass rounded-lg px-3 py-2 text-sm flex items-center gap-2">
                <span class="w-2 h-2 rounded-full bg-green-500 pulse-dot"></span>
                <span class="text-green-400 font-medium">3 vendedores online</span>
            </div>
            <button onclick="openSettingsModal()" class="glass hover:bg-white/10 rounded-lg px-4 py-2 text-sm font-medium transition-all flex items-center gap-2">
                ‚öôÔ∏è Configura√ß√µes
            </button>
        </div>
    </header>

    <!-- Tabs -->
    <div class="flex gap-1 mb-6 glass rounded-xl p-1 w-fit">
        <button onclick="showTab('aprovacoes')" id="tab-aprovacoes" class="px-4 py-2 rounded-lg text-sm font-medium transition-all tab-active">
            üîî Aprova√ß√µes <span class="badge bg-orange-500/30 text-orange-400 ml-1">4</span>
        </button>
        <button onclick="showTab('dividas')" id="tab-dividas" class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-white/5">
            ‚ö†Ô∏è Alertas D√≠vida <span class="badge bg-red-500/30 text-red-400 ml-1">2</span>
        </button>
        <button onclick="showTab('historico')" id="tab-historico" class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-white/5">
            üìä Hist√≥rico Pre√ßos
        </button>
        <button onclick="showTab('regras')" id="tab-regras" class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-white/5">
            üìã Regras
        </button>
    </div>

    <!-- Stats R√°pidos -->
    <div class="grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6">
        <div class="glass rounded-xl p-4 card-hover">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 gradient-orange rounded-lg flex items-center justify-center">‚è≥</div>
                <div>
                    <p class="text-2xl font-bold" id="pendingCount">4</p>
                    <p class="text-slate-400 text-xs">Pendentes</p>
                </div>
            </div>
        </div>
        <div class="glass rounded-xl p-4 card-hover">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 gradient-green rounded-lg flex items-center justify-center">‚úÖ</div>
                <div>
                    <p class="text-2xl font-bold">12</p>
                    <p class="text-slate-400 text-xs">Aprovados Hoje</p>
                </div>
            </div>
        </div>
        <div class="glass rounded-xl p-4 card-hover">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 gradient-red rounded-lg flex items-center justify-center">‚ö†Ô∏è</div>
                <div>
                    <p class="text-2xl font-bold">2</p>
                    <p class="text-slate-400 text-xs">Clientes c/ D√≠vida</p>
                </div>
            </div>
        </div>
        <div class="glass rounded-xl p-4 card-hover">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 gradient-blue rounded-lg flex items-center justify-center">üí∞</div>
                <div>
                    <p class="text-2xl font-bold">‚Ç¨847</p>
                    <p class="text-slate-400 text-xs">Descontos Hoje</p>
                </div>
            </div>
        </div>
        <div class="glass rounded-xl p-4 card-hover">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 gradient-purple rounded-lg flex items-center justify-center">üìà</div>
                <div>
                    <p class="text-2xl font-bold">‚Ç¨12.4k</p>
                    <p class="text-slate-400 text-xs">Vendas Hoje</p>
                </div>
            </div>
        </div>
    </div>

    <!-- TAB: Aprova√ß√µes -->
    <div id="content-aprovacoes" class="tab-content">
        <div class="grid lg:grid-cols-3 gap-6">
            <!-- Coluna Principal: Pedidos Pendentes -->
            <div class="lg:col-span-2 space-y-4">
                <!-- Pedido URGENTE -->
                <div class="glass rounded-xl p-5 card-hover border-l-4 border-red-500 pulse-urgent">
                    <div class="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="badge bg-red-500/30 text-red-400">üö® URGENTE</span>
                                <span class="badge bg-purple-500/20 text-purple-400">Desconto &gt; 15%</span>
                                <span class="text-xs text-slate-500">h√° 2 min</span>
                            </div>
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center text-lg">üë§</div>
                                <div>
                                    <p class="font-semibold">Carlos Mendes</p>
                                    <p class="text-sm text-slate-400">Vendedor #3 ‚Ä¢ Zona Sul</p>
                                </div>
                            </div>
                            <div class="glass-light rounded-lg p-3 mb-3">
                                <p class="text-sm text-slate-300 mb-2">üí¨ <em>"O cliente diz que a concorr√™ncia oferece a 11‚Ç¨/kg. Preciso de baixar para fechar o neg√≥cio."</em></p>
                                <div class="flex flex-wrap gap-4 text-sm">
                                    <div><span class="text-slate-500">Cliente:</span> <span class="font-medium">Restaurante Mar Azul</span></div>
                                    <div><span class="text-slate-500">Produto:</span> <span class="font-medium">Polvo 2000/3000</span></div>
                                    <div><span class="text-slate-500">Qtd:</span> <span class="font-medium">50kg</span></div>
                                </div>
                            </div>
                            <div class="flex items-center gap-4 text-sm">
                                <div><span class="text-slate-500">Pre√ßo tabela:</span> <span class="font-semibold">‚Ç¨12,20/kg</span></div>
                                <span class="text-slate-600">‚Üí</span>
                                <div><span class="text-slate-500">Pedido:</span> <span class="font-semibold text-red-400">‚Ç¨11,00/kg</span> <span class="badge bg-red-500/20 text-red-400">-9.8%</span></div>
                                <div><span class="text-slate-500">Impacto:</span> <span class="font-semibold text-red-400">-‚Ç¨60,00</span></div>
                            </div>
                        </div>
                        <div class="flex lg:flex-col gap-2">
                            <button onclick="aprovar(this, 'Carlos Mendes', '‚Ç¨11,00/kg')" class="btn-approve px-6 py-3 rounded-lg font-semibold transition-all">‚úÖ Aprovar</button>
                            <button onclick="contraproposta(this)" class="btn-counter px-6 py-3 rounded-lg font-semibold transition-all">üí¨ ‚Ç¨11,50</button>
                            <button onclick="rejeitar(this, 'Carlos Mendes')" class="btn-reject px-6 py-3 rounded-lg font-semibold transition-all">‚ùå Rejeitar</button>
                        </div>
                    </div>
                </div>

                <!-- Pedido Normal 1 -->
                <div class="glass rounded-xl p-5 card-hover border-l-4 border-orange-500">
                    <div class="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="badge bg-orange-500/20 text-orange-400">Desconto 5-10%</span>
                                <span class="text-xs text-slate-500">h√° 15 min</span>
                            </div>
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center text-lg">üë§</div>
                                <div>
                                    <p class="font-semibold">Ana Silva</p>
                                    <p class="text-sm text-slate-400">Vendedora #1 ‚Ä¢ Zona Norte</p>
                                </div>
                            </div>
                            <div class="flex flex-wrap gap-4 text-sm mb-2">
                                <div><span class="text-slate-500">Cliente:</span> <span class="font-medium">Hotel Cascais</span> <span class="badge bg-blue-500/20 text-blue-400 ml-1">Regular</span></div>
                                <div><span class="text-slate-500">Produto:</span> <span class="font-medium">Salm√£o Posta Extra</span></div>
                                <div><span class="text-slate-500">Qtd:</span> <span class="font-medium">30kg</span></div>
                            </div>
                            <div class="flex items-center gap-4 text-sm">
                                <div><span class="text-slate-500">Pre√ßo:</span> <span class="font-semibold">‚Ç¨9,65</span> ‚Üí <span class="text-orange-400 font-semibold">‚Ç¨9,00</span> <span class="badge bg-orange-500/20 text-orange-400">-6.7%</span></div>
                                <div><span class="text-slate-500">Impacto:</span> <span class="text-orange-400">-‚Ç¨19,50</span></div>
                            </div>
                        </div>
                        <div class="flex lg:flex-col gap-2">
                            <button onclick="aprovar(this, 'Ana Silva', '‚Ç¨9,00/kg')" class="btn-approve px-5 py-2 rounded-lg font-semibold transition-all text-sm">‚úÖ Aprovar</button>
                            <button onclick="rejeitar(this, 'Ana Silva')" class="btn-reject px-5 py-2 rounded-lg font-semibold transition-all text-sm">‚ùå Rejeitar</button>
                        </div>
                    </div>
                </div>

                <!-- Pedido Normal 2 -->
                <div class="glass rounded-xl p-5 card-hover border-l-4 border-yellow-500">
                    <div class="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="badge bg-yellow-500/20 text-yellow-400">Desconto &lt; 5%</span>
                                <span class="badge bg-green-500/20 text-green-400">Auto-aprov√°vel</span>
                                <span class="text-xs text-slate-500">h√° 32 min</span>
                            </div>
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center text-lg">üë§</div>
                                <div>
                                    <p class="font-semibold">Miguel Costa</p>
                                    <p class="text-sm text-slate-400">Vendedor #5 ‚Ä¢ Zona Centro</p>
                                </div>
                            </div>
                            <div class="flex flex-wrap gap-4 text-sm">
                                <div><span class="text-slate-500">Cliente:</span> <span class="font-medium">Caf√© Central</span></div>
                                <div><span class="text-slate-500">Produto:</span> <span class="font-medium">Camar√£o 30/40</span></div>
                                <div><span class="text-slate-500">‚Ç¨4,75</span> ‚Üí <span class="text-yellow-400">‚Ç¨4,60</span> <span class="badge bg-yellow-500/20 text-yellow-400">-3.2%</span></div>
                            </div>
                        </div>
                        <div class="flex lg:flex-col gap-2">
                            <button onclick="aprovar(this, 'Miguel Costa', '‚Ç¨4,60/kg')" class="btn-approve px-5 py-2 rounded-lg font-semibold transition-all text-sm">‚úÖ Aprovar</button>
                            <button onclick="rejeitar(this, 'Miguel Costa')" class="btn-reject px-5 py-2 rounded-lg font-semibold transition-all text-sm">‚ùå Rejeitar</button>
                        </div>
                    </div>
                </div>

                <!-- Venda Fechada -->
                <div class="glass rounded-xl p-5 card-hover border-l-4 border-green-500">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="badge bg-green-500/20 text-green-400">üéâ VENDA FECHADA</span>
                                <span class="text-xs text-slate-500">h√° 5 min</span>
                            </div>
                            <div class="flex flex-wrap gap-4 text-sm">
                                <div><span class="font-medium">Carlos Mendes</span></div>
                                <div><span class="text-slate-500">Cliente:</span> <span class="font-medium">Marisqueira Lisboa</span></div>
                                <div><span class="text-slate-500">Total:</span> <span class="font-semibold text-green-400">‚Ç¨1.250,00</span></div>
                            </div>
                        </div>
                        <span class="text-3xl">üéä</span>
                    </div>
                </div>
            </div>

            <!-- Coluna Lateral -->
            <div class="space-y-4">
                <!-- Vendedores Online -->
                <div class="glass rounded-xl p-5">
                    <h3 class="font-semibold mb-4">üë• Vendedores Activos</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="relative">
                                    <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-xs">AS</div>
                                    <span class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-900"></span>
                                </div>
                                <div>
                                    <p class="font-medium text-sm">Ana Silva</p>
                                    <p class="text-xs text-slate-500">Zona Norte</p>
                                </div>
                            </div>
                            <span class="text-green-400 text-sm font-medium">‚Ç¨2.340</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="relative">
                                    <div class="w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center text-xs">CM</div>
                                    <span class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-900"></span>
                                </div>
                                <div>
                                    <p class="font-medium text-sm">Carlos Mendes</p>
                                    <p class="text-xs text-slate-500">Zona Sul</p>
                                </div>
                            </div>
                            <span class="text-green-400 text-sm font-medium">‚Ç¨1.890</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="relative">
                                    <div class="w-8 h-8 rounded-full bg-yellow-500/20 flex items-center justify-center text-xs">MC</div>
                                    <span class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-900"></span>
                                </div>
                                <div>
                                    <p class="font-medium text-sm">Miguel Costa</p>
                                    <p class="text-xs text-slate-500">Zona Centro</p>
                                </div>
                            </div>
                            <span class="text-green-400 text-sm font-medium">‚Ç¨1.120</span>
                        </div>
                    </div>
                </div>

                <!-- Hist√≥rico Recente -->
                <div class="glass rounded-xl p-5">
                    <h3 class="font-semibold mb-4">üìú √öltimas Decis√µes</h3>
                    <div class="space-y-3 text-sm" id="historicoLista">
                        <div class="flex items-center gap-3 p-2 rounded-lg glass-light">
                            <span class="text-green-400">‚úÖ</span>
                            <div class="flex-1">
                                <p class="text-slate-300">Ana Silva - ‚Ç¨9,20/kg</p>
                                <p class="text-xs text-slate-500">Salm√£o ‚Ä¢ h√° 1h</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3 p-2 rounded-lg glass-light">
                            <span class="text-red-400">‚ùå</span>
                            <div class="flex-1">
                                <p class="text-slate-300">Rui Ferreira - ‚Ç¨10,00/kg</p>
                                <p class="text-xs text-slate-500">Polvo ‚Ä¢ h√° 2h</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TAB: Alertas D√≠vida -->
    <div id="content-dividas" class="tab-content hidden">
        <div class="space-y-4">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-bold">‚ö†Ô∏è Clientes com D√≠vida a Fazer Encomenda</h2>
                <span class="badge bg-red-500/30 text-red-400">Aten√ß√£o Requerida</span>
            </div>

            <!-- Alerta D√≠vida 1 -->
            <div class="glass rounded-xl p-5 border-l-4 border-red-500 pulse-urgent">
                <div class="flex flex-col lg:flex-row lg:items-start justify-between gap-4">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="badge bg-red-500/30 text-red-400">üö® D√çVIDA VENCIDA</span>
                            <span class="text-xs text-slate-500">Alerta √†s 14:32</span>
                        </div>
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center text-xl">üè™</div>
                            <div>
                                <p class="font-semibold text-lg">Restaurante Beira Mar</p>
                                <p class="text-sm text-slate-400">Cliente desde 2019 ‚Ä¢ 156 encomendas</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                            <div class="glass-light rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-red-400">‚Ç¨2.450</p>
                                <p class="text-xs text-slate-500">D√≠vida Total</p>
                            </div>
                            <div class="glass-light rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-orange-400">45 dias</p>
                                <p class="text-xs text-slate-500">Mais Antiga</p>
                            </div>
                            <div class="glass-light rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-yellow-400">3</p>
                                <p class="text-xs text-slate-500">Facturas Pendentes</p>
                            </div>
                            <div class="glass-light rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-blue-400">‚Ç¨890</p>
                                <p class="text-xs text-slate-500">Nova Encomenda</p>
                            </div>
                        </div>
                        <div class="glass-light rounded-lg p-3">
                            <p class="text-sm text-slate-400 mb-2">üì¶ <strong>Encomenda Pedida:</strong></p>
                            <p class="text-sm">Polvo 1000/2000 (20kg) + Camar√£o 30/40 (15kg) + Salm√£o Posta (10kg)</p>
                            <p class="text-xs text-slate-500 mt-2">Vendedor: Carlos Mendes ‚Ä¢ Via WhatsApp</p>
                        </div>
                    </div>
                    <div class="flex flex-col gap-2">
                        <button onclick="aprovarComAlerta(this)" class="bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-3 rounded-lg font-semibold transition-all">
                            ‚ö†Ô∏è Aprovar c/ Aviso
                        </button>
                        <button onclick="bloquearEncomenda(this)" class="btn-reject px-6 py-3 rounded-lg font-semibold transition-all">
                            üö´ Bloquear
                        </button>
                        <button onclick="ligarCliente()" class="glass hover:bg-white/10 px-6 py-3 rounded-lg font-semibold transition-all">
                            üìû Ligar Cliente
                        </button>
                    </div>
                </div>
            </div>

            <!-- Alerta D√≠vida 2 -->
            <div class="glass rounded-xl p-5 border-l-4 border-orange-500">
                <div class="flex flex-col lg:flex-row lg:items-start justify-between gap-4">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="badge bg-orange-500/30 text-orange-400">‚ö†Ô∏è D√çVIDA RECENTE</span>
                        </div>
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-12 h-12 rounded-full bg-orange-500/20 flex items-center justify-center text-xl">üè®</div>
                            <div>
                                <p class="font-semibold text-lg">Hotel Atl√¢ntico</p>
                                <p class="text-sm text-slate-400">Cliente desde 2021 ‚Ä¢ 89 encomendas</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                            <div class="glass-light rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-orange-400">‚Ç¨780</p>
                                <p class="text-xs text-slate-500">D√≠vida Total</p>
                            </div>
                            <div class="glass-light rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-yellow-400">12 dias</p>
                                <p class="text-xs text-slate-500">Vencida h√°</p>
                            </div>
                            <div class="glass-light rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-green-400">1</p>
                                <p class="text-xs text-slate-500">Factura Pendente</p>
                            </div>
                            <div class="glass-light rounded-lg p-3 text-center">
                                <p class="text-2xl font-bold text-blue-400">‚Ç¨1.240</p>
                                <p class="text-xs text-slate-500">Nova Encomenda</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col gap-2">
                        <button onclick="aprovarComAlerta(this)" class="btn-approve px-6 py-3 rounded-lg font-semibold transition-all">
                            ‚úÖ Aprovar
                        </button>
                        <button onclick="enviarLembrete()" class="btn-counter px-6 py-3 rounded-lg font-semibold transition-all">
                            üìß Enviar Lembrete
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TAB: Hist√≥rico de Pre√ßos -->
    <div id="content-historico" class="tab-content hidden">
        <div class="glass rounded-xl p-6">
            <h2 class="text-xl font-bold mb-6">üìä Consulta de Hist√≥rico de Pre√ßos</h2>
            <p class="text-slate-400 mb-6">Os vendedores podem consultar via bot: <code class="bg-slate-700 px-2 py-1 rounded">"Pre√ßo polvo para Restaurante Mar Azul"</code></p>
            
            <div class="grid lg:grid-cols-2 gap-6">
                <!-- Formul√°rio de Pesquisa -->
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-slate-400 mb-2">Cliente</label>
                        <select id="searchCliente" class="w-full rounded-lg px-4 py-3 text-white">
                            <option value="">Seleccionar cliente...</option>
                            <option value="mar-azul">Restaurante Mar Azul</option>
                            <option value="hotel-cascais">Hotel Cascais</option>
                            <option value="beira-mar">Restaurante Beira Mar</option>
                            <option value="marisqueira">Marisqueira Lisboa</option>
                            <option value="cafe-central">Caf√© Central</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm text-slate-400 mb-2">Produto</label>
                        <select id="searchProduto" class="w-full rounded-lg px-4 py-3 text-white">
                            <option value="">Seleccionar produto...</option>
                            <option value="polvo-2000">Polvo 2000/3000</option>
                            <option value="polvo-1000">Polvo 1000/2000</option>
                            <option value="camarao-30">Camar√£o 30/40</option>
                            <option value="salmao">Salm√£o Posta Extra</option>
                            <option value="bacalhau">Bacalhau Lombo 300/400</option>
                        </select>
                    </div>
                    <button onclick="pesquisarHistorico()" class="w-full gradient-blue px-6 py-3 rounded-lg font-semibold transition-all hover:opacity-90">
                        üîç Pesquisar Hist√≥rico
                    </button>
                </div>

                <!-- Resultados -->
                <div id="resultadosHistorico" class="glass-light rounded-xl p-5">
                    <h3 class="font-semibold mb-4">üìã Hist√≥rico: Polvo 2000/3000 ‚Üí Restaurante Mar Azul</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 rounded-lg bg-white/5">
                            <div>
                                <p class="font-medium">15 Jan 2026</p>
                                <p class="text-xs text-slate-500">50kg ‚Ä¢ Carlos Mendes</p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-green-400">‚Ç¨11,50/kg</p>
                                <p class="text-xs text-slate-500">-5.7% do tabela</p>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-3 rounded-lg bg-white/5">
                            <div>
                                <p class="font-medium">28 Dez 2025</p>
                                <p class="text-xs text-slate-500">30kg ‚Ä¢ Carlos Mendes</p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-yellow-400">‚Ç¨11,80/kg</p>
                                <p class="text-xs text-slate-500">-3.3% do tabela</p>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-3 rounded-lg bg-white/5">
                            <div>
                                <p class="font-medium">10 Dez 2025</p>
                                <p class="text-xs text-slate-500">40kg ‚Ä¢ Ana Silva</p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold">‚Ç¨12,00/kg</p>
                                <p class="text-xs text-slate-500">-1.6% do tabela</p>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-3 rounded-lg bg-white/5">
                            <div>
                                <p class="font-medium">22 Nov 2025</p>
                                <p class="text-xs text-slate-500">25kg ‚Ä¢ Carlos Mendes</p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold">‚Ç¨12,20/kg</p>
                                <p class="text-xs text-slate-500">Pre√ßo tabela</p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-white/10">
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Pre√ßo m√©dio:</span>
                            <span class="font-bold">‚Ç¨11,88/kg</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Desconto m√©dio:</span>
                            <span class="font-bold text-orange-400">-2.6%</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Total comprado:</span>
                            <span class="font-bold">145kg (‚Ç¨1.722,60)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Exemplo de pergunta ao bot -->
            <div class="mt-6 glass-light rounded-xl p-5">
                <h3 class="font-semibold mb-3">üí¨ Como o vendedor pergunta ao bot:</h3>
                <div class="space-y-2 text-sm">
                    <div class="flex gap-3 items-start">
                        <span class="text-blue-400">üë§ Vendedor:</span>
                        <span class="glass px-3 py-2 rounded-lg">"A quanto vendemos polvo ao Mar Azul?"</span>
                    </div>
                    <div class="flex gap-3 items-start">
                        <span class="text-green-400">ü§ñ Aurora:</span>
                        <span class="glass px-3 py-2 rounded-lg">"Restaurante Mar Azul comprou Polvo 2000/3000 4 vezes. √öltimo pre√ßo: ‚Ç¨11,50/kg (-5.7%). M√©dia: ‚Ç¨11,88/kg. Quer que prepare uma proposta?"</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TAB: Regras (Edit√°veis) -->
    <div id="content-regras" class="tab-content hidden">
        <div class="glass rounded-xl p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold">üìã Regras de Desconto & Pol√≠ticas</h2>
                <button onclick="guardarRegras()" class="gradient-green px-6 py-2 rounded-lg font-semibold transition-all hover:opacity-90">
                    üíæ Guardar Altera√ß√µes
                </button>
            </div>

            <div class="grid lg:grid-cols-2 gap-6">
                <!-- Regras de Desconto -->
                <div class="space-y-4">
                    <h3 class="font-semibold text-lg border-b border-white/10 pb-2">üí∞ Limites de Desconto</h3>
                    
                    <div class="glass-light rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="font-medium">Auto-Aprova√ß√£o (sem interven√ß√£o)</label>
                            <span class="badge bg-green-500/20 text-green-400">Activo</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-slate-400">At√©</span>
                            <input type="number" id="regra-auto" value="5" class="w-20 rounded-lg px-3 py-2 text-center text-white font-bold">
                            <span class="text-slate-400">% de desconto</span>
                        </div>
                    </div>

                    <div class="glass-light rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="font-medium">Aprova√ß√£o Paula (normal)</label>
                            <span class="badge bg-orange-500/20 text-orange-400">Requer Aprova√ß√£o</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-slate-400">De</span>
                            <input type="number" id="regra-paula-min" value="5" class="w-20 rounded-lg px-3 py-2 text-center text-white font-bold">
                            <span class="text-slate-400">a</span>
                            <input type="number" id="regra-paula-max" value="10" class="w-20 rounded-lg px-3 py-2 text-center text-white font-bold">
                            <span class="text-slate-400">%</span>
                        </div>
                    </div>

                    <div class="glass-light rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="font-medium">Desconto Excepcional</label>
                            <span class="badge bg-red-500/20 text-red-400">Justifica√ß√£o Obrigat√≥ria</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-slate-400">Acima de</span>
                            <input type="number" id="regra-excepcional" value="10" class="w-20 rounded-lg px-3 py-2 text-center text-white font-bold">
                            <span class="text-slate-400">%</span>
                        </div>
                    </div>

                    <div class="glass-light rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="font-medium">B√≥nus Cliente Regular</label>
                            <span class="badge bg-purple-500/20 text-purple-400">Autom√°tico</span>
                        </div>
                        <div class="flex items-center gap-3 mb-2">
                            <span class="text-slate-400">Ap√≥s</span>
                            <input type="number" id="regra-regular-pedidos" value="10" class="w-20 rounded-lg px-3 py-2 text-center text-white font-bold">
                            <span class="text-slate-400">pedidos, permite +</span>
                            <input type="number" id="regra-regular-bonus" value="5" class="w-20 rounded-lg px-3 py-2 text-center text-white font-bold">
                            <span class="text-slate-400">%</span>
                        </div>
                    </div>
                </div>

                <!-- Pol√≠ticas de D√≠vida -->
                <div class="space-y-4">
                    <h3 class="font-semibold text-lg border-b border-white/10 pb-2">‚ö†Ô∏è Pol√≠ticas de D√≠vida</h3>
                    
                    <div class="glass-light rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="font-medium">Alerta de D√≠vida</label>
                            <span class="badge bg-yellow-500/20 text-yellow-400">Aviso ao Vendedor</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-slate-400">Quando cliente deve h√° mais de</span>
                            <input type="number" id="regra-divida-alerta" value="7" class="w-20 rounded-lg px-3 py-2 text-center text-white font-bold">
                            <span class="text-slate-400">dias</span>
                        </div>
                    </div>

                    <div class="glass-light rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="font-medium">Bloqueio Autom√°tico</label>
                            <span class="badge bg-red-500/20 text-red-400">Encomenda Bloqueada</span>
                        </div>
                        <div class="flex items-center gap-3 mb-2">
                            <span class="text-slate-400">Quando d√≠vida &gt;</span>
                            <input type="number" id="regra-bloqueio-valor" value="3000" class="w-24 rounded-lg px-3 py-2 text-center text-white font-bold">
                            <span class="text-slate-400">‚Ç¨</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-slate-400">OU vencida h√° mais de</span>
                            <input type="number" id="regra-bloqueio-dias" value="60" class="w-20 rounded-lg px-3 py-2 text-center text-white font-bold">
                            <span class="text-slate-400">dias</span>
                        </div>
                    </div>

                    <div class="glass-light rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="font-medium">Lembretes Autom√°ticos</label>
                            <span class="badge bg-blue-500/20 text-blue-400">Email/WhatsApp</span>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="lembrete-1" checked class="rounded">
                                <label for="lembrete-1">1 dia ap√≥s vencimento</label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="lembrete-7" checked class="rounded">
                                <label for="lembrete-7">7 dias ap√≥s vencimento</label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="lembrete-15" checked class="rounded">
                                <label for="lembrete-15">15 dias ap√≥s vencimento</label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="lembrete-30" checked class="rounded">
                                <label for="lembrete-30">30 dias ap√≥s vencimento (√∫ltimo aviso)</label>
                            </div>
                        </div>
                    </div>

                    <div class="glass-light rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="font-medium">Notifica√ß√µes Paula</label>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="notif-desconto" checked class="rounded">
                                <label for="notif-desconto">Pedidos de desconto &gt; 5%</label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="notif-divida" checked class="rounded">
                                <label for="notif-divida">Encomenda de cliente com d√≠vida</label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="notif-venda" class="rounded">
                                <label for="notif-venda">Todas as vendas fechadas</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed top-4 right-4 glass rounded-xl p-4 shadow-2xl hidden notification-enter border-l-4" style="min-width: 300px;">
        <div class="flex items-center gap-3">
            <span id="toastIcon" class="text-2xl">‚úÖ</span>
            <div>
                <p id="toastTitle" class="font-semibold">Aprovado!</p>
                <p id="toastMessage" class="text-sm text-slate-400">Notifica√ß√£o enviada</p>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('[id^="tab-"]').forEach(el => el.classList.remove('tab-active'));
            document.getElementById('content-' + tabName).classList.remove('hidden');
            document.getElementById('tab-' + tabName).classList.add('tab-active');
        }

        // Toast
        function showToast(icon, title, message, type = 'success') {
            const toast = document.getElementById('toast');
            document.getElementById('toastIcon').textContent = icon;
            document.getElementById('toastTitle').textContent = title;
            document.getElementById('toastMessage').textContent = message;
            
            toast.classList.remove('hidden', 'border-green-500', 'border-red-500', 'border-orange-500', 'border-blue-500');
            const colors = { success: 'border-green-500', reject: 'border-red-500', counter: 'border-orange-500', info: 'border-blue-500' };
            toast.classList.add(colors[type] || 'border-green-500');
            
            setTimeout(() => toast.classList.add('hidden'), 4000);
        }

        // Aprova√ß√µes
        function aprovar(btn, vendedor, preco) {
            const card = btn.closest('.glass');
            card.style.opacity = '0.5';
            card.style.transform = 'translateX(100px)';
            card.style.transition = 'all 0.3s ease';
            setTimeout(() => { card.remove(); updatePendingCount(); }, 300);
            showToast('‚úÖ', 'Aprovado!', `${vendedor} notificado via WhatsApp`, 'success');
        }

        function rejeitar(btn, vendedor) {
            const card = btn.closest('.glass');
            card.style.opacity = '0.5';
            card.style.transform = 'translateX(-100px)';
            card.style.transition = 'all 0.3s ease';
            setTimeout(() => { card.remove(); updatePendingCount(); }, 300);
            showToast('‚ùå', 'Rejeitado', `${vendedor} notificado via WhatsApp`, 'reject');
        }

        function contraproposta(btn) {
            showToast('üí¨', 'Contraproposta Enviada', 'Carlos Mendes recebeu: ‚Ç¨11,50/kg', 'counter');
        }

        function updatePendingCount() {
            const count = document.querySelectorAll('#content-aprovacoes .border-l-4:not(.border-green-500)').length;
            document.getElementById('pendingCount').textContent = count;
        }

        // D√≠vidas
        function aprovarComAlerta(btn) {
            const card = btn.closest('.glass');
            card.style.opacity = '0.3';
            showToast('‚ö†Ô∏è', 'Aprovado com Aviso', 'Vendedor alertado sobre d√≠vida do cliente', 'counter');
        }

        function bloquearEncomenda(btn) {
            const card = btn.closest('.glass');
            card.remove();
            showToast('üö´', 'Encomenda Bloqueada', 'Cliente notificado para regularizar d√≠vida', 'reject');
        }

        function ligarCliente() {
            showToast('üìû', 'A Ligar...', 'Restaurante Beira Mar: 912 345 678', 'info');
        }

        function enviarLembrete() {
            showToast('üìß', 'Lembrete Enviado', 'Email + WhatsApp enviados ao Hotel Atl√¢ntico', 'info');
        }

        // Hist√≥rico
        function pesquisarHistorico() {
            const cliente = document.getElementById('searchCliente').value;
            const produto = document.getElementById('searchProduto').value;
            if (!cliente || !produto) {
                showToast('‚ö†Ô∏è', 'Campos Obrigat√≥rios', 'Seleccione cliente e produto', 'counter');
                return;
            }
            showToast('üîç', 'A Pesquisar...', 'Hist√≥rico actualizado', 'info');
        }

        // Regras
        function guardarRegras() {
            const regras = {
                autoAprovacao: document.getElementById('regra-auto').value,
                paulaMin: document.getElementById('regra-paula-min').value,
                paulaMax: document.getElementById('regra-paula-max').value,
                excepcional: document.getElementById('regra-excepcional').value,
                regularPedidos: document.getElementById('regra-regular-pedidos').value,
                regularBonus: document.getElementById('regra-regular-bonus').value,
                dividaAlerta: document.getElementById('regra-divida-alerta').value,
                bloqueioValor: document.getElementById('regra-bloqueio-valor').value,
                bloqueioDias: document.getElementById('regra-bloqueio-dias').value
            };
            console.log('Regras guardadas:', regras);
            localStorage.setItem('auroraRegras', JSON.stringify(regras));
            showToast('üíæ', 'Regras Guardadas!', 'As altera√ß√µes foram aplicadas', 'success');
        }

        // Load saved rules
        document.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('auroraRegras');
            if (saved) {
                const regras = JSON.parse(saved);
                if (regras.autoAprovacao) document.getElementById('regra-auto').value = regras.autoAprovacao;
                if (regras.paulaMin) document.getElementById('regra-paula-min').value = regras.paulaMin;
                if (regras.paulaMax) document.getElementById('regra-paula-max').value = regras.paulaMax;
                if (regras.excepcional) document.getElementById('regra-excepcional').value = regras.excepcional;
                if (regras.regularPedidos) document.getElementById('regra-regular-pedidos').value = regras.regularPedidos;
                if (regras.regularBonus) document.getElementById('regra-regular-bonus').value = regras.regularBonus;
                if (regras.dividaAlerta) document.getElementById('regra-divida-alerta').value = regras.dividaAlerta;
                if (regras.bloqueioValor) document.getElementById('regra-bloqueio-valor').value = regras.bloqueioValor;
                if (regras.bloqueioDias) document.getElementById('regra-bloqueio-dias').value = regras.bloqueioDias;
            }
        });
    </script>
</body>
</html>
